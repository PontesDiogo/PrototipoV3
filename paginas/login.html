<!doctype html>
<html lang="pt-br">

<head>
    <meta charset="utf-8">

    <link rel="stylesheet" href="/node_modules/bootstrap/dist/css/bootstrap.min.css">
    <link rel="stylesheet" href="/node_modules/bootstrap-icons/font/bootstrap-icons.css">
    <link rel="stylesheet" href="/css/estilos.css">

    <title>Students on Working :: Login</title>
</head>

<body>
    <div class="d-flex flex-column wrapper">
        <nav class="navbar navbar-expand-lg navbar-dark bg-primary border-bottom shadow-sm mb-3">
            <div class="container">
                <a class="navbar-brand" href="/dist/index.html"><b>Students at Working</b></a>
                <button class="navbar-toggler" type="button" data-bs-toggle="collapse"
                    data-bs-target=".navbar-collapse">
                    <span class="navbar-toggler-icon"></span>
                </button>
                <div class="collapse navbar-collapse">
                    <ul class="navbar-nav flex-grow-1">
                        <li class="nav-item">
                            <a class="nav-link text-white" href="./../dist/index.html">Início</a>
                        </li>
                    </ul>
                    <div class="align-self-end">
                        <ul class="navbar-nav">
                            <li class="nav-item">
                                <a href="login.html" class="nav-link text-white">Entrar</a>
                            </li>
                            <li class="nav-item">
                                <a href="cadastro.html" class="nav-link text-white">Quero me cadastrar</a>
                            </li>

                        </ul>
                    </div>
                </div>
            </div>
        </nav>

        <main class="flex-fill">
            <div class="container">
                <div class="row justify-content-center">
                    <form class="col-sm-10 col-md-8 col-lg-6">
                        <h1>Identifique-se, por favor</h1>

                        <div class="form-floating mb-3">
                            <input type="email" id="inputEmail" class="form-control" placeholder=" " autofocus>
                            <label for="inputEmail">E-mail</label>
                        </div>

                        <div class="form-floating mb-3">
                            <input type="password" id="inputSenha" class="form-control" placeholder=" ">
                            <label for="inputSenha">Senha</label>
                        </div>

                        <div class="form-check mb-3">
                            <input type="checkbox" class="form-check-input" value="" id="chkLembrar">
                            <label for="chkLembrar" class="form-check-label">Lembrar de mim</label>
                        </div>

                        <button type="button" onclick="window.location.href='perfil.html'"
                            class="btn btn-lg btn-primary" id="btnEntrar">Entrar</button>

                        <p class="mt-3">
                            Ainda não possui cadastro? <a href="cadastro.html">Clique aqui</a> para se cadastrar.
                        </p>

                        <p class="mt-3">
                            Esqueceu sua senha? <a href="recuperarsenha.html">Clique aqui</a> para recuperá-la.
                        </p>
                    </form>
                </div>
            </div>
        </main>

        <footer class="border-top bg-light">
            <div class="container">
                <div class="row">
                    <div class="col-1 col-md-4 text-center">
                        &copy; 2022 - Students on Working Ltda ME<br>
                        R. Manira Jacob Biscaro, 45  Jd. Baccili, Tietê - SP <br>
                    </div>
                    <div class="col-12 col-md-4 text-center">
                        <a href="/privacidade.html" class="text-decoration-none text-dark">Política de
                            Privacidade</a><br>
                        <a href="/termos.html" class="text-decoration-none text-dark">Termos de Uso</a><br>
                        <a href="/quemsomos.html" class="text-decoration-none text-dark">Quem Somos</a><br>
                    </div>
                    <div class="col-12 col-md-4 text-center text-md-right">
                        <a href="/contato.html" class="text-decoration-none text-dark">Contato pelo site</a><br>
                        E-mail: <a href="mailto:email@dominio.com"
                            class="text-decoration-none text-dark">email@dominio.com</a><br>
                        Telefone: <a href="phone:28999990000" class="text-decoration-none text-dark">(28) 99999-0000</a>

                    </div>
                </div>
            </div>
        </footer>
    </div>
    <script src="/node_modules/bootstrap/dist/js/bootstrap.bundle.min.js"></script>
    <script>

        $("#btnEntrar").click(()=>{
            login($("#inputEmail").val(), $("#inputPassword").val());

        });

        function login(email, senha){
            var objectJson = JSON.stringify({
                "acao": "logar",
                "usuario":email,
                "senha":senha
            });
            $.post("controller/administrador.php/",objectJson,function(resposta){
                console.log(resposta);
                if(resposta.result){
                    let usuario = resposta.data;
                    alert(`Usuário: ${usuario.nome} logado; \nE-mail: ${usuario.email}; \nMatricula: ${usuario.matricula}`)
                }
                else{
                    alert("Email ou senha inválidos")
                }

            });
        }

    </script>
</body>

</html>
